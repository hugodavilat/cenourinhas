{% extends 'base.html' %}
{% block title %}Confirmação de Presença{% endblock %}
{% block content %}
<div class="section-inner accent-bg rounded shadow">
  <h2 class="display-font accent">Confirmação de Presença</h2>
  <form method="post">
    {% csrf_token %}
    <p class="mb-3">Confirme ou rejeite a presença de cada membro da família:</p>
    <ul class="list-group mb-3">
      <li class="list-group-item d-flex align-items-center justify-content-between
        {% if main_guest.is_confirmed %}bg-success bg-opacity-25
        {% elif main_guest.is_rejected %}bg-danger bg-opacity-25
        {% endif %}">
        <span class="fw-bold
          {% if main_guest.is_confirmed %}text-success
          {% elif main_guest.is_rejected %}text-danger
          {% elif main_guest.not_answered %}text-dark
          {% endif %}">
          {{ main_guest.name }} {% if main_guest.phone_number %}({{ main_guest.phone_number }}){% endif %}
        </span>
        <span>
          <button name="confirm_{{ main_guest.id }}" value="1" class="btn btn-outline-success btn-sm me-1" type="submit" title="Confirmar" {% if main_guest.is_confirmed %}disabled{% endif %}><i class="bi bi-check-lg"></i></button>
          <button name="confirm_{{ main_guest.id }}" value="0" class="btn btn-outline-danger btn-sm" type="submit" title="Rejeitar" {% if main_guest.is_rejected %}disabled{% endif %}><i class="bi bi-x-lg"></i></button>
        </span>
      </li>
      {% for extra in extras %}
      <li class="list-group-item d-flex align-items-center justify-content-between
        {% if extra.is_confirmed %}bg-success bg-opacity-25
        {% elif extra.is_rejected %}bg-danger bg-opacity-25
        {% endif %}">
        <span class="ms-3
          {% if extra.is_confirmed %}text-success
          {% elif extra.is_rejected %}text-danger
          {% elif extra.not_answered %}text-dark
          {% endif %}">
          ↳ {{ extra.name }} {% if extra.phone_number %}({{ extra.phone_number }}){% endif %}
        </span>
        <span>
          <button name="confirm_extra_{{ extra.id }}" value="1" class="btn btn-outline-success btn-sm me-1" type="submit" title="Confirmar" {% if extra.is_confirmed %}disabled{% endif %}><i class="bi bi-check-lg"></i></button>
          <button name="confirm_extra_{{ extra.id }}" value="0" class="btn btn-outline-danger btn-sm" type="submit" title="Rejeitar" {% if extra.is_rejected %}disabled{% endif %}><i class="bi bi-x-lg"></i></button>
        </span>
      </li>
      {% endfor %}
    </ul>
  </form>
{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
{% endblock %}
</div>
{% endblock %}
